<!DOCTYPE html>
<html class="has-navbar-fixed-top">
<head>
    <meta charset="utf-8">
<title>2024-8-9-baidu文心一言批量提交图片解析 - 记录伟大征程</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.css">




<meta name="description" content="">





    <meta name="description" content="这两天开始测试midjourney自动blend批量生产建筑装饰创新，目前遇到的问题是经常会退出断线，断线频率在1小时左右，原因目前不明，要保证每组blend尽量少的损失么，把单次自动暂停设置为40分钟比较好，省的总是心里不踏实要两边跑。在下载方面为了避免频道闪退，在一开始保证prefer auto dm即可把输出给到midjourney bot而且这样做不用按u键放大，在浏览器打开图片，用cop">
<meta property="og:type" content="article">
<meta property="og:title" content="2024-8-9-baidu文心一言批量提交图片解析">
<meta property="og:url" content="http://zhudian.xyz/2024/08/14/2024-8-9/index.html">
<meta property="og:site_name" content="记录伟大征程">
<meta property="og:description" content="这两天开始测试midjourney自动blend批量生产建筑装饰创新，目前遇到的问题是经常会退出断线，断线频率在1小时左右，原因目前不明，要保证每组blend尽量少的损失么，把单次自动暂停设置为40分钟比较好，省的总是心里不踏实要两边跑。在下载方面为了避免频道闪退，在一开始保证prefer auto dm即可把输出给到midjourney bot而且这样做不用按u键放大，在浏览器打开图片，用cop">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://zhudian.xyz/2024/08/14/2024-8-9/2024-8-9/71926f3d3885ad13a13e0afff254cf2a_MD5.jpg">
<meta property="og:image" content="http://zhudian.xyz/2024/08/14/2024-8-9/2024-8-9/9122a9076e7d1d79e16719b2feb669fa_MD5.jpg">
<meta property="og:image" content="http://zhudian.xyz/2024/08/14/2024-8-9/2024-8-9/00e7c8cbb0d528dbb4c2ac640aea3f44_MD5.jpg">
<meta property="og:image" content="http://zhudian.xyz/2024/08/14/2024-8-9/2024-8-9/3cda7960c725d7b09481ced99843685a_MD5.jpg">
<meta property="og:image" content="http://zhudian.xyz/2024/08/14/2024-8-9/2024-8-9/acf5e728e9e5328478926dae71855288_MD5.jpg">
<meta property="og:image" content="http://zhudian.xyz/2024/08/14/2024-8-9/2024-8-9/e34cafbc5033de66470938c65012f46e_MD5.jpg">
<meta property="og:image" content="http://zhudian.xyz/2024/08/14/2024-8-9/2024-8-9/f3c8e05f12633b47907913c76a487e64_MD5.jpg">
<meta property="og:image" content="http://zhudian.xyz/2024/08/14/2024-8-9/2024-8-9/bbf7f1b2d0829128a3d6e67cc5b3d9aa_MD5.jpg">
<meta property="og:image" content="http://zhudian.xyz/2024/08/14/2024-8-9/2024-8-9/bccdb0366c34bccad12a5c05ff0371e4_MD5.jpg">
<meta property="og:image" content="http://zhudian.xyz/2024/08/14/2024-8-9/2024-8-9/07a8f3368135554805ed8e0daf4961a4_MD5.jpg">
<meta property="og:image" content="http://zhudian.xyz/2024/08/14/2024-8-9/2024-8-9/ff2fb6cbca3ecf215090497d333a089c_MD5.jpg">
<meta property="og:image" content="http://zhudian.xyz/2024/08/14/2024-8-9/2024-8-9/bdb0c2026dcea0b4cffe052f78769fe5_MD5.jpg">
<meta property="og:image" content="http://zhudian.xyz/2024/08/14/2024-8-9/2024-8-9/23712ed24d3bd5ccade1d74a7ccce228_MD5.jpg">
<meta property="og:image" content="http://zhudian.xyz/2024/08/14/2024-8-9/2024-8-9/aab83f1b273219b0914ba423634507ac_MD5.jpg">
<meta property="og:image" content="http://zhudian.xyz/2024/08/14/2024-8-9/2024-8-9/ae8471d362bd5f6441c8e4e8cd2ddce3_MD5.jpg">
<meta property="og:image" content="http://zhudian.xyz/2024/08/14/2024-8-9/2024-8-9/d4ce67961bff9e38bf13d276df1744da_MD5.jpg">
<meta property="og:image" content="http://zhudian.xyz/2024/08/14/2024-8-9/2024-8-9/336084699697eba317ebd0b4341fc74f_MD5.jpg">
<meta property="og:image" content="http://zhudian.xyz/2024-8-9/26dddfdd98ca7bcf2bf72bb35ff2fca3_MD5.jpg">
<meta property="og:image" content="http://zhudian.xyz/2024/08/14/2024-8-9/2024-8-9/3778540561e7819243196dd41923a8d2_MD5.jpg">
<meta property="og:image" content="http://zhudian.xyz/2024/08/14/2024-8-9/2024-8-9/c5b3bdf849652b8a33aa38ceb0865b60_MD5.jpg">
<meta property="og:image" content="http://zhudian.xyz/2024/08/14/2024-8-9/2024-8-9/b98b33c5366060dea8bd5448e858a182_MD5.jpg">
<meta property="article:published_time" content="2024-08-14T06:46:33.000Z">
<meta property="article:modified_time" content="2024-08-14T06:58:44.814Z">
<meta property="article:author" content="于洋">
<meta property="article:tag" content="人工智能">
<meta property="article:tag" content="python">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://zhudian.xyz/2024/08/14/2024-8-9/2024-8-9/71926f3d3885ad13a13e0afff254cf2a_MD5.jpg">





<link rel="icon" href="/favicon.ico">


<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ovo|Source+Code+Pro">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.min.css">


<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/css/lightgallery.min.css">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/css/justifiedGallery.min.css">


<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css">


<link rel="stylesheet" href="/css/style.css">


<script defer src="//use.fontawesome.com/releases/v5.0.8/js/all.js"></script>


    
    
    
    
    
    
    
    
    
    

    


<meta name="generator" content="Hexo 6.0.0"></head>
<body>
    
<nav class="navbar is-transparent is-fixed-top navbar-main" role="navigation" aria-label="main navigation">
    <div class="container">
        <div class="navbar-brand">
            <a class="navbar-item navbar-logo" href="/">
                
                    
                    <img src="/long3.jpg" alt="" height="28">
                    
                
            </a>
            <div class="navbar-burger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
        
        <div class="navbar-menu navbar-start">
            
            <a class="navbar-item "
               href="/archives">归档</a>
            
            <a class="navbar-item "
               href="/categories/%E5%BB%BA%E7%AD%91%E7%90%86%E8%AE%BA">建筑理论</a>
            
            <a class="navbar-item "
               href="/categories/CG%E6%8A%80%E6%9C%AF">CG技术</a>
            
            <a class="navbar-item "
               href="/categories/%E6%97%A5%E8%AE%B0">日记</a>
            
            <a class="navbar-item "
               href="/about">我的目标</a>
            
        </div>
        
        <div class="navbar-menu navbar-end">
            
            <a class="navbar-item search" title="搜索" href="javascript:;">
                <i class="fas fa-search"></i>
            </a>
            
            
            <div class="navbar-item is-hoverable has-dropdown is-hidden-mobile is-hidden-tablet-only toc">
                <a class="navbar-item" title="目录">
                    <i class="fa fa-list"></i>
                </a>
                <div class="navbar-dropdown is-right">
                    
                    
                </div>
            </div>
            
            
        </div>
    </div>
</nav>

    <section class="section">
    <div class="container">
    <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            2024-8-9-baidu文心一言批量提交图片解析
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            
                <time datetime="2024-08-14T06:46:33.000Z" itemprop="datePublished">8月 14 2024</time>
            
        </span>
        
        <span class="column is-narrow article-category">
            <i class="far fa-folder"></i>
            <a class="article-category-link" href="/categories/%E6%97%A5%E8%AE%B0/">日记</a>
        </span>
        
        
        <span class="column is-narrow">
            
            
            26 分钟 读完 (约 3902 字)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <html><head></head><body><p>这两天开始测试midjourney自动blend批量生产建筑装饰创新，目前遇到的问题是经常会退出断线，断线频率在1小时左右，原因目前不明，要保证每组blend尽量少的损失么，把单次自动暂停设置为40分钟比较好，省的总是心里不踏实要两边跑。在下载方面为了避免频道闪退，在一开始保证prefer auto dm即可把输出给到midjourney bot而且这样做不用按u键放大，在浏览器打开图片，用copytab插件批量复制url，再用wfdownloadapp批量下载图片。大约50分钟停一下去房间里新开一个频道，然后o键继续，目前由于是刚开始还没适应这种模式，其实这个模式倒是蛮符合我开始设定的每天定时工作流的。</p>
<p>几天下来，差不多是一天200个图，这还是我有选择的下载并不是所有的图。目前我还没有明确的下载依据，就是随着眼缘。一开始用这套自动化程序的目的是为了产出新的建筑装饰、多样的房型排列、图案、雕塑。目前我还没有进一步对产出的图做系列扩展，在midjourney本身的体系是用vary strong/vary sutble来扩展，那样虽然连续性高，但是难以从住宅、办公楼、医院、学校、商场这样的不同建筑类型来形成系列。我们说罗马建筑、art deco建筑、中式建筑等等都伴随着一些建筑装饰、部件、图案、雕塑应用在不同功能的建筑上。比如希腊柱式用到艾欧尼亚建筑可以在市政厅、财宝储藏室、神殿、运动场、剧院等多种建筑上。在midjourney中的扩展，我的思路是/imagine a building/an apartment building/a city hall/a shopping mall + 图片链接 –iw 2-3 iw越高风格和原图越像，这样可以使一个局部装饰部件或者完整的建筑转化为指定的建筑类型，从而扩展出全系列建筑，甚至可以通过图片本身的特征自定义出一种全新功能的建筑。就好比剧院、运动场这些，中式建筑基本是空白，那有没有可能构造出来？更进一步就是构造出当今世界还不存在的建筑类型，那么是先有某种活动还是先有某种建筑？像下面3组图，一眼望去会觉得很诡异，确实有许多一时间难以用语言形容的部件、材质、布局、色彩、装饰手法，但同时很难去构思说这样的装饰传达了什么情感可以作为什么历史上从未出现过的建筑功能，衍生出独特的人文，这部分可以让文心一言ai试试看。</p>
<p><img src="/2024/08/14/2024-8-9/2024-8-9/71926f3d3885ad13a13e0afff254cf2a_MD5.jpg"></p>
<span id="more"></span>

<p><img src="/2024/08/14/2024-8-9/2024-8-9/9122a9076e7d1d79e16719b2feb669fa_MD5.jpg"></p>
<p><img src="/2024/08/14/2024-8-9/2024-8-9/00e7c8cbb0d528dbb4c2ac640aea3f44_MD5.jpg"></p>
<p>在做这些程序时，不知不觉就会迷失了，像以前一个漫画中说的在投了10亿和几十年的研究后已经忘记了最初要研究什么东西了。用midjourney生产建筑装饰创意对我而言是要解决不懂设计的情况下批量快速出创新的设计参考，然后我去建模实现变成场景从而实现设计的落地和我的冠名权，由于ai可以生产大量的创意，理想状态下我能在短时间内落地许多风格的建筑装饰创新从而成为古往今来不可描述的大宗师、大豪杰。要落地参考图的话一方面是建模技术、景观布置技术可以跟得上，一开始是拿现成的su项目导入，根据效果图临摹做材质、景观表现。在进一步就是像下图这样从一个平面规划图、到景观布置图，</p>
<p><img src="/2024/08/14/2024-8-9/2024-8-9/3cda7960c725d7b09481ced99843685a_MD5.jpg"></p>
<p><img src="/2024/08/14/2024-8-9/2024-8-9/acf5e728e9e5328478926dae71855288_MD5.jpg"></p>
<p><img src="/2024/08/14/2024-8-9/2024-8-9/e34cafbc5033de66470938c65012f46e_MD5.jpg"></p>
<p><img src="/2024/08/14/2024-8-9/2024-8-9/f3c8e05f12633b47907913c76a487e64_MD5.jpg"></p>
<p><img src="/2024/08/14/2024-8-9/2024-8-9/bbf7f1b2d0829128a3d6e67cc5b3d9aa_MD5.jpg"></p>
<p><img src="/2024/08/14/2024-8-9/2024-8-9/bccdb0366c34bccad12a5c05ff0371e4_MD5.jpg"></p>
<p><img src="/2024/08/14/2024-8-9/2024-8-9/07a8f3368135554805ed8e0daf4961a4_MD5.jpg"></p>
<p>可以看的出来，设计院、设计公司一般是先把建筑和道路位置在指定地块设定好之后再做初步的绿化、水景设定。然后白模初步摆放。不同分区找实景效果图、参考图，细化制作。如果完全按着midjourney参考图按图索骥那等于说是放弃既定地形和道路，到时候要延伸扩展分区合并将变成一个完全不可控的工作，因此可以说是要结合创意的无限性和布局的限制性，所以当布局确定时最好是希望创新的建筑装饰也有类似布局的参考还能搭配上景观。</p>
<p><img src="/2024/08/14/2024-8-9/2024-8-9/ff2fb6cbca3ecf215090497d333a089c_MD5.jpg"></p>
<p><img src="/2024/08/14/2024-8-9/2024-8-9/bdb0c2026dcea0b4cffe052f78769fe5_MD5.jpg"></p>
<p><img src="/2024/08/14/2024-8-9/2024-8-9/23712ed24d3bd5ccade1d74a7ccce228_MD5.jpg"></p>
<p><img src="/2024/08/14/2024-8-9/2024-8-9/aab83f1b273219b0914ba423634507ac_MD5.jpg"></p>
<p>图片文件分类归档将是一个很大的问题，可以预想通过blend混合部件、特征、图案、房型排列产生的建筑装饰图，以目前的blend3来说变幻其中1个、2个原料图，可能可以作为之前一个系列的延伸扩展。那么问题是如何去界定一个系列？我目前为了观察blend的特点，按照日期和原料图打包成一个文件夹。显然随着时间推进会有多个文件夹里的原料图是重合的，而它们的产出可能会和之前有联系，那怎么去“联合”这种关系？目前暂时不清楚，1天产出200个陌生而具有创造力的建筑装饰也让我来不及整理，所以是不是要设定某种程度上的断舍离呢？我在尝试用文字归纳总结时感到有种无从下手的感觉，于是想到ai图生文。</p>
<p><img src="/2024/08/14/2024-8-9/2024-8-9/ae8471d362bd5f6441c8e4e8cd2ddce3_MD5.jpg"></p>
<p>midjourney是我之前接触过最好的图生文，stable diffusion相对而言要差远了，但是用midjourney的话意味着得打断作图，另外它的文字生成无法通过文字指令优化，产出的随机性太强，虽然在特征方面可以提供一些意想不到的点。后来在github上看到一个项目，不过描述质量一般然后是阿里巴巴的通义千问，我第一版做的自动化程序就是针对它的，然而实测后发现通义千问十分弱智，连字数要求都远远不能达到更不要说按照设定的要求。chatgpt需要plus付费版可以识别图片，一个月大概160块钱，我暂时没考虑。最后是百度文心一言，产出的质量是不错的，然而它似乎有多重防自动化提交的检测机制。一开始是上传图片，到了第二轮就会产生什么当前环境异常请更换浏览器，在selenium控制模式下即使手动刷新也不行，然而在正常浏览模式下一次刷新可以解决。后来我发现在windows文件对话框来3轮模拟定位文件夹路径伪装查找文件的过程，可以解决这个问题。在后面遇到的超出智能体预设能力范围暂时不明，我猜可能和待机时长有关系，过于频繁发起图片解析会出问题，于是我把待机加长，并设置期间点击浏览器内的某些位置，随机拉动滚动条。最后是图片上传失败导致后面的进程全部打乱，暂时还没实测中解决，理论上在图片提交后检测html有没有“上传失败”，然后pyautogui去点击上传失败的大叉删除上传失败的图片，设定一个while true continue的循环逻辑，当检测到上传失败则continue回到这个循环的开头这样能保证再次发起对当前这个图片上传的请求，直到上传成功再向下执行后面的程序填充输入框文字指令、发送请求。在txt输出完成后break彻底跳出当此循环，到外层的循环对下一个图片发起上传请求。</p>
<p>图片上传失败这种情景手动删除再手动上传是可以发送请求的，我推测是网络问题导致的，台式电脑的无线网经常会自动切换、掉线啥的，正好碰上不巧等于是没网了上传了一半。</p>
<p><img src="/2024/08/14/2024-8-9/2024-8-9/d4ce67961bff9e38bf13d276df1744da_MD5.jpg"></p>
<p><img src="/2024/08/14/2024-8-9/2024-8-9/336084699697eba317ebd0b4341fc74f_MD5.jpg"></p>
<p><img src="/2024-8-9/26dddfdd98ca7bcf2bf72bb35ff2fca3_MD5.jpg"></p>
<p><img src="/2024/08/14/2024-8-9/2024-8-9/3778540561e7819243196dd41923a8d2_MD5.jpg"></p>
<p><img src="/2024/08/14/2024-8-9/2024-8-9/c5b3bdf849652b8a33aa38ceb0865b60_MD5.jpg"></p>
<p>有了midjourney自动生成创意和文心一言自动生成描述么，我想可以先做些宣发了，比如每天固定更新一些建筑装饰到小红书、知乎、bilibili甚至youtube、tiktok？多开几个账号？</p>
<p>进一步测试我发现百度文心一言在解析一个pdf文件后再发图片要求它用pdf所学的内容去分析图片暂时不可行，暂时不知道有什么办法让它学习一本书然后用这本书的知识来分析特定问题。另外实测了chatpgt plus试用解读图片，效果一般般，和百度半斤八两吧。</p>
<p><img src="/2024/08/14/2024-8-9/2024-8-9/b98b33c5366060dea8bd5448e858a182_MD5.jpg"></p>
<figure class="highlight python hljs"><figcaption><span>文心一言批量解读图片</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">import</span> os</span><br><span class="line"><span class="hljs-keyword">import</span> time</span><br><span class="line"><span class="hljs-keyword">import</span> random</span><br><span class="line"><span class="hljs-keyword">import</span> pyautogui</span><br><span class="line"><span class="hljs-keyword">from</span> selenium <span class="hljs-keyword">import</span> webdriver</span><br><span class="line"><span class="hljs-keyword">from</span> selenium.webdriver.chrome.service <span class="hljs-keyword">import</span> Service</span><br><span class="line"><span class="hljs-keyword">from</span> selenium.webdriver.chrome.options <span class="hljs-keyword">import</span> Options</span><br><span class="line"><span class="hljs-keyword">from</span> selenium.webdriver.common.by <span class="hljs-keyword">import</span> By</span><br><span class="line"><span class="hljs-keyword">from</span> selenium.webdriver.support.ui <span class="hljs-keyword">import</span> WebDriverWait</span><br><span class="line"><span class="hljs-keyword">from</span> selenium.webdriver.support <span class="hljs-keyword">import</span> expected_conditions <span class="hljs-keyword">as</span> EC</span><br><span class="line"><span class="hljs-keyword">from</span> selenium.webdriver.common.action_chains <span class="hljs-keyword">import</span> ActionChains</span><br><span class="line"><span class="hljs-keyword">from</span> selenium.webdriver.common.keys <span class="hljs-keyword">import</span> Keys</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># 指定本地Chromedriver的路径</span></span><br><span class="line">chromedriver_path = <span class="hljs-string">'E:\\kimi_analyze\\chromedriver-win64\\chromedriver.exe'</span>  <span class="hljs-comment"># 替换为您本地的ChromeDriver路径</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># 创建Service对象</span></span><br><span class="line">service = Service(executable_path=chromedriver_path)</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># 设置ChromeOptions</span></span><br><span class="line">options = Options()</span><br><span class="line">options.add_argument(<span class="hljs-string">'lang=zh_CN.UTF-8'</span>)</span><br><span class="line"><span class="hljs-comment"># 更换头部</span></span><br><span class="line">options.add_argument(<span class="hljs-string">'user-agent="Mozilla/5.0 (iPod; U; CPU iPhone OS 2_1 like Mac OS X; ja-jp) AppleWebKit/525.18.1 (KHTML, like Gecko) Version/3.1.1 Mobile/5F137 Safari/525.20"'</span>)</span><br><span class="line"></span><br><span class="line">options.add_argument(<span class="hljs-string">r'--user-data-dir=C:/Users/A/AppData/Local/Google/Chrome/User Data'</span>)</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># 创建Chrome浏览器实例</span></span><br><span class="line">driver = webdriver.Chrome(service=service, options=options)</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># 打开目标网页</span></span><br><span class="line">url = <span class="hljs-string">'https://yiyan.baidu.com/chat/4544202670'</span>  <span class="hljs-comment"># 替换为实际的网页URL</span></span><br><span class="line">driver.get(url)</span><br><span class="line">time.sleep(<span class="hljs-number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># 文件夹路径</span></span><br><span class="line">folder_path = <span class="hljs-string">'F:/midjourney_blend_Record/20240804/bbb'</span>  <span class="hljs-comment"># 替换为实际的文件夹路径</span></span><br><span class="line">folder_paths_random = [</span><br><span class="line">        <span class="hljs-string">"E:/kimi_analyze/abb"</span>,</span><br><span class="line">        <span class="hljs-string">"E:/kimi_analyze/bab"</span>,</span><br><span class="line">        <span class="hljs-string">"E:/kimi_analyze/you"</span>,</span><br><span class="line">        <span class="hljs-string">"E:/hanghai"</span>,</span><br><span class="line">        <span class="hljs-string">"E:/midjourney"</span>,</span><br><span class="line">        <span class="hljs-string">"E:/MyDrivers"</span>,</span><br><span class="line">        <span class="hljs-string">"E:/pytorch3d"</span>,</span><br><span class="line">        <span class="hljs-string">"E:/pythonstudy"</span>,</span><br><span class="line">        <span class="hljs-string">"E:/painteruvtest1"</span>,</span><br><span class="line">        <span class="hljs-string">"E:/unrealhoudiniplugin"</span></span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">zishus = [</span><br><span class="line">        <span class="hljs-string">"1100"</span>,</span><br><span class="line">        <span class="hljs-string">"1122"</span>,</span><br><span class="line">        <span class="hljs-string">"955"</span>,</span><br><span class="line">        <span class="hljs-string">"999"</span>,</span><br><span class="line">        <span class="hljs-string">"1111"</span>,</span><br><span class="line">        <span class="hljs-string">"1133"</span>,</span><br><span class="line">        <span class="hljs-string">"966"</span>,</span><br><span class="line">        <span class="hljs-string">"977"</span>,</span><br><span class="line">        <span class="hljs-string">"988"</span>,</span><br><span class="line">        <span class="hljs-string">"1199"</span></span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># 获取文件列表</span></span><br><span class="line">files = [f <span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> os.listdir(folder_path) <span class="hljs-keyword">if</span> f.lower().endswith((<span class="hljs-string">'.png'</span>, <span class="hljs-string">'.jpg'</span>, <span class="hljs-string">'.jpeg'</span>))]</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># TXT 文件路径</span></span><br><span class="line">txt_file_path = <span class="hljs-string">'E:/kimi_analyze/chromedriver-win64/BaiduPicRecognize2.txt'</span>  <span class="hljs-comment"># 替换为你的TXT文件路径</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># 读取 TXT 文件内容</span></span><br><span class="line"><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(txt_file_path, <span class="hljs-string">'r'</span>, encoding=<span class="hljs-string">'utf-8'</span>) <span class="hljs-keyword">as</span> txt_file:</span><br><span class="line">    file_content = txt_file.read()</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">def</span> <span class="title function_">check_upload_failure</span>():</span><br><span class="line">    <span class="hljs-string">"""</span></span><br><span class="line"><span class="hljs-string">    检查网页上是否有上传失败的提示</span></span><br><span class="line"><span class="hljs-string">    """</span></span><br><span class="line">    <span class="hljs-keyword">try</span>:</span><br><span class="line">        <span class="hljs-comment"># 等待失败提示出现</span></span><br><span class="line">        failure_element = WebDriverWait(driver, <span class="hljs-number">5</span>).until(</span><br><span class="line">            EC.presence_of_element_located((By.XPATH, <span class="hljs-string">"//span[text() = '上传失败']"</span>))</span><br><span class="line">        )</span><br><span class="line">        <span class="hljs-built_in">print</span>(<span class="hljs-string">"检测到上传失败的提示"</span>)</span><br><span class="line">        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span></span><br><span class="line">    <span class="hljs-keyword">except</span>:</span><br><span class="line">        <span class="hljs-built_in">print</span>(<span class="hljs-string">"未检测到上传失败的提示"</span>)</span><br><span class="line">        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">def</span> <span class="title function_">handle_upload_failure</span>():</span><br><span class="line">    <span class="hljs-string">"""</span></span><br><span class="line"><span class="hljs-string">    处理上传失败的图片</span></span><br><span class="line"><span class="hljs-string">    """</span></span><br><span class="line">    <span class="hljs-built_in">print</span>(<span class="hljs-string">"处理上传失败的图片"</span>)</span><br><span class="line">    pyautogui.click(<span class="hljs-number">1657</span>, <span class="hljs-number">1690</span>)  <span class="hljs-comment"># 点击删除按钮</span></span><br><span class="line">    time.sleep(<span class="hljs-number">2</span>)  <span class="hljs-comment"># 等待删除完成</span></span><br><span class="line">    <span class="hljs-built_in">print</span>(<span class="hljs-string">"已删除上传失败的图片"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">def</span> <span class="title function_">focus_file_name_input</span>():</span><br><span class="line">    <span class="hljs-string">"""</span></span><br><span class="line"><span class="hljs-string">    将光标聚焦到文件名输入框</span></span><br><span class="line"><span class="hljs-string">    """</span></span><br><span class="line">    pyautogui.click(<span class="hljs-number">954</span>, <span class="hljs-number">984</span>) </span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">def</span> <span class="title function_">set_file_dialog_path</span>(<span class="hljs-params">path</span>):</span><br><span class="line">    <span class="hljs-string">"""</span></span><br><span class="line"><span class="hljs-string">    设置文件对话框的地址栏路径</span></span><br><span class="line"><span class="hljs-string">    """</span></span><br><span class="line">    pyautogui.click(<span class="hljs-number">904</span>, <span class="hljs-number">65</span>)  <span class="hljs-comment"># 聚焦地址栏</span></span><br><span class="line">    time.sleep(<span class="hljs-number">1</span>)</span><br><span class="line">    pyautogui.write(path)  <span class="hljs-comment"># 输入路径</span></span><br><span class="line">    pyautogui.press(<span class="hljs-string">'enter'</span>)  <span class="hljs-comment"># 确认路径</span></span><br><span class="line">    time.sleep(<span class="hljs-number">2</span>)  <span class="hljs-comment"># 等待路径加载完成</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">def</span> <span class="title function_">copy_files_to_clipboard</span>(<span class="hljs-params">file_paths</span>):</span><br><span class="line">    <span class="hljs-string">"""</span></span><br><span class="line"><span class="hljs-string">    复制文件到剪贴板</span></span><br><span class="line"><span class="hljs-string">    """</span></span><br><span class="line">    <span class="hljs-keyword">import</span> win32clipboard</span><br><span class="line">    <span class="hljs-keyword">from</span> win32con <span class="hljs-keyword">import</span> CF_UNICODETEXT</span><br><span class="line">    </span><br><span class="line">    <span class="hljs-comment"># Copy files to clipboard</span></span><br><span class="line">    file_list = <span class="hljs-string">'\n'</span>.join(file_paths)</span><br><span class="line">    win32clipboard.OpenClipboard()</span><br><span class="line">    win32clipboard.EmptyClipboard()</span><br><span class="line">    win32clipboard.SetClipboardData(CF_UNICODETEXT, file_list)</span><br><span class="line">    win32clipboard.CloseClipboard()</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">def</span> <span class="title function_">paste_files</span>():</span><br><span class="line">    <span class="hljs-string">"""</span></span><br><span class="line"><span class="hljs-string">    粘贴剪贴板中的文件到对话框</span></span><br><span class="line"><span class="hljs-string">    """</span></span><br><span class="line">    pyautogui.hotkey(<span class="hljs-string">'ctrl'</span>, <span class="hljs-string">'v'</span>)</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">def</span> <span class="title function_">get_latest_response</span>(<span class="hljs-params">driver, image_file_name</span>):</span><br><span class="line">    <span class="hljs-string">"""</span></span><br><span class="line"><span class="hljs-string">    获取包含指定图片文件名的最新回复内容</span></span><br><span class="line"><span class="hljs-string">    """</span></span><br><span class="line">    response_elements = WebDriverWait(driver, <span class="hljs-number">10</span>).until(</span><br><span class="line">        EC.presence_of_all_elements_located((By.XPATH, <span class="hljs-string">'//div[@class=\'q4y8uP0A\']//div[@id=\'answer_text_id\']'</span>))</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="hljs-keyword">for</span> response_element <span class="hljs-keyword">in</span> <span class="hljs-built_in">reversed</span>(response_elements):</span><br><span class="line">        response_text = response_element.text</span><br><span class="line">        <span class="hljs-comment"># print(f"Found response: {response_text}")  # Debug print</span></span><br><span class="line">        <span class="hljs-keyword">if</span> image_file_name <span class="hljs-keyword">in</span> response_text:</span><br><span class="line">            <span class="hljs-keyword">return</span> response_text</span><br><span class="line"></span><br><span class="line">    <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">def</span> <span class="title function_">random_scroll</span>(<span class="hljs-params">driver, min_duration=<span class="hljs-number">3</span>, max_duration=<span class="hljs-number">5</span></span>):</span><br><span class="line">    <span class="hljs-string">"""</span></span><br><span class="line"><span class="hljs-string">    随机滚动网页条，持续时间在 min_duration 到 max_duration 秒之间。</span></span><br><span class="line"><span class="hljs-string">    """</span></span><br><span class="line">    end_time = time.time() + random.uniform(min_duration, max_duration)</span><br><span class="line">    </span><br><span class="line">    <span class="hljs-keyword">while</span> time.time() &lt; end_time:</span><br><span class="line">        <span class="hljs-comment"># 随机生成滚动次数</span></span><br><span class="line">        num_scrolls = random.randint(<span class="hljs-number">3</span>, <span class="hljs-number">5</span>)  <span class="hljs-comment"># 可以调整为所需的滚动次数范围</span></span><br><span class="line"></span><br><span class="line">        <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(num_scrolls):</span><br><span class="line">            ActionChains(driver).key_down(Keys.PAGE_UP).key_up(Keys.PAGE_UP).perform()</span><br><span class="line">            time.sleep(random.uniform(<span class="hljs-number">0.5</span>, <span class="hljs-number">0.9</span>)) </span><br><span class="line"></span><br><span class="line">        <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(num_scrolls):    </span><br><span class="line">            ActionChains(driver).key_down(Keys.PAGE_DOWN).key_up(Keys.PAGE_DOWN).perform()</span><br><span class="line">            time.sleep(random.uniform(<span class="hljs-number">0.6</span>, <span class="hljs-number">0.8</span>)) </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># 循环上传图片文件</span></span><br><span class="line"><span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> files:</span><br><span class="line">    file_path = os.path.join(folder_path, file)</span><br><span class="line">    file_name = os.path.basename(file_path)</span><br><span class="line"></span><br><span class="line">    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:  <span class="hljs-comment"># 循环直到图片上传成功</span></span><br><span class="line">        <span class="hljs-keyword">try</span>:</span><br><span class="line">            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"开始上传文件: <span class="hljs-subst">{file_name}</span>"</span>)</span><br><span class="line">            pyautogui.click(<span class="hljs-number">1625</span>, <span class="hljs-number">1778</span>)</span><br><span class="line">            time.sleep(<span class="hljs-number">2</span>) </span><br><span class="line"></span><br><span class="line">            <span class="hljs-comment"># 设置文件对话框的地址栏路径</span></span><br><span class="line">            set_file_dialog_path(folder_path)</span><br><span class="line">            time.sleep(<span class="hljs-number">1</span>)</span><br><span class="line">            folder_path_random = random.choice(folder_paths_random)</span><br><span class="line">            set_file_dialog_path(folder_path_random)</span><br><span class="line">            time.sleep(<span class="hljs-number">1</span>)</span><br><span class="line">            set_file_dialog_path(folder_path)</span><br><span class="line"></span><br><span class="line">            <span class="hljs-comment"># 将光标聚焦到文件名输入框</span></span><br><span class="line">            focus_file_name_input()</span><br><span class="line">            time.sleep(<span class="hljs-number">2</span>)</span><br><span class="line">            <span class="hljs-comment"># 复制文件路径到剪贴板</span></span><br><span class="line">            copy_files_to_clipboard([file_name])</span><br><span class="line"></span><br><span class="line">            <span class="hljs-comment"># 使用 pyautogui 粘贴文件</span></span><br><span class="line">            paste_files()</span><br><span class="line">            time.sleep(<span class="hljs-number">2</span>)</span><br><span class="line">            pyautogui.press(<span class="hljs-string">'enter'</span>)  <span class="hljs-comment"># 提交命令</span></span><br><span class="line">            <span class="hljs-built_in">print</span>(<span class="hljs-string">"提交上传图片命令"</span>)</span><br><span class="line">            <span class="hljs-comment"># 等待文件上传完成</span></span><br><span class="line">            time.sleep(<span class="hljs-number">8</span>)  <span class="hljs-comment"># 等待8秒钟</span></span><br><span class="line">            <span class="hljs-keyword">if</span> check_upload_failure():</span><br><span class="line">                <span class="hljs-built_in">print</span>(<span class="hljs-string">"检测到上传失败"</span>)</span><br><span class="line">                time.sleep(<span class="hljs-number">2</span>)</span><br><span class="line">                handle_upload_failure()</span><br><span class="line">                time.sleep(<span class="hljs-number">2</span>)</span><br><span class="line">                <span class="hljs-keyword">continue</span>  <span class="hljs-comment"># 重新上传图片</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            zishu = random.choice(zishus)</span><br><span class="line">            <span class="hljs-comment"># random_content = random.choice(random_contents)</span></span><br><span class="line">            <span class="hljs-comment"># 输入内容到对话框</span></span><br><span class="line">            content = <span class="hljs-string">f"用<span class="hljs-subst">{zishu}</span>字中文详细描述我本次发送的图片，以“<span class="hljs-subst">{file_name}</span>”展示了为开头，"</span></span><br><span class="line">            send_content = content + file_content</span><br><span class="line"></span><br><span class="line">            dialog_input = WebDriverWait(driver, <span class="hljs-number">10</span>).until(</span><br><span class="line">                EC.presence_of_element_located((By.XPATH, <span class="hljs-string">"//div[@class='yc-editor-wrapper']/div[@class='yc-editor' and @contenteditable='true']"</span>))</span><br><span class="line">            )</span><br><span class="line">            dialog_input.click()</span><br><span class="line">            dialog_input.clear()</span><br><span class="line">            dialog_input.send_keys(send_content)</span><br><span class="line">            <span class="hljs-built_in">print</span>(<span class="hljs-string">"内容已发送到对话框"</span>)</span><br><span class="line">            time.sleep(<span class="hljs-number">8</span>)  <span class="hljs-comment"># 等待15秒钟</span></span><br><span class="line">            <span class="hljs-built_in">print</span>(<span class="hljs-string">"点击提交按钮"</span>)</span><br><span class="line">            </span><br><span class="line">            pyautogui.click(<span class="hljs-number">3113</span>, <span class="hljs-number">2002</span>) <span class="hljs-comment"># 点击提交按钮，提交图片和文字指令</span></span><br><span class="line"></span><br><span class="line">            <span class="hljs-comment"># submit_button = WebDriverWait(driver, 10).until(</span></span><br><span class="line">            <span class="hljs-comment">#     EC.element_to_be_clickable((By.XPATH, "//span[contains(@class, 'VAtmtpqL')]"))</span></span><br><span class="line">            <span class="hljs-comment"># )</span></span><br><span class="line">            <span class="hljs-comment"># submit_button.click()</span></span><br><span class="line">            </span><br><span class="line">            <span class="hljs-comment"># 等待1.5分钟</span></span><br><span class="line">            time.sleep(<span class="hljs-number">65</span>)</span><br><span class="line">            pyautogui.click(<span class="hljs-number">997</span>, <span class="hljs-number">1340</span>) </span><br><span class="line"></span><br><span class="line">            </span><br><span class="line">            random_integer = random.randint(<span class="hljs-number">66</span>, <span class="hljs-number">88</span>)</span><br><span class="line">            time.sleep(random_integer)</span><br><span class="line"></span><br><span class="line">            response_content = get_latest_response(driver, file_name)</span><br><span class="line">            <span class="hljs-keyword">if</span> response_content:</span><br><span class="line">                <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(os.path.join(folder_path, <span class="hljs-string">f'<span class="hljs-subst">{file_name}</span>_response.txt'</span>), <span class="hljs-string">'w'</span>, encoding=<span class="hljs-string">'utf-8'</span>) <span class="hljs-keyword">as</span> response_file:</span><br><span class="line">                    response_file.write(response_content)</span><br><span class="line">            <span class="hljs-keyword">else</span>:</span><br><span class="line">                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"No response found for <span class="hljs-subst">{file_name}</span>"</span>)</span><br><span class="line"></span><br><span class="line">            time.sleep(random_integer/<span class="hljs-number">12</span>)</span><br><span class="line">            pyautogui.click(<span class="hljs-number">997</span>, <span class="hljs-number">1340</span>)</span><br><span class="line">            <span class="hljs-comment"># random_scroll(driver)</span></span><br><span class="line">            time.sleep(random_integer/<span class="hljs-number">12</span>)</span><br><span class="line">            <span class="hljs-comment"># 刷新网页</span></span><br><span class="line">            <span class="hljs-comment"># pyautogui.click(134, 86)</span></span><br><span class="line">            <span class="hljs-comment"># time.sleep(2)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:</span><br><span class="line">            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Error occurred: <span class="hljs-subst">{e}</span>"</span>)</span><br><span class="line">            <span class="hljs-comment"># 输出堆栈跟踪</span></span><br><span class="line">            <span class="hljs-keyword">import</span> traceback</span><br><span class="line">            <span class="hljs-built_in">print</span>(traceback.format_exc())</span><br><span class="line"></span><br><span class="line">        <span class="hljs-keyword">break</span> <span class="hljs-comment"># 跳出内层循环，处理下一个文件</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># 关闭浏览器</span></span><br><span class="line">driver.quit()</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure></body></html>
    
    </div>
    
    <div class="columns is-variable is-1 is-multiline is-mobile">
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/">#人工智能</a></span>
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/tags/python/">#python</a></span>
    
    </div>
    
    
    <div class="columns is-mobile is-multiline article-nav">
        <span class="column is-12-mobile is-half-desktop  article-nav-prev">
            
            <a href="/2024/08/20/2024-8-19/">2024-8-19-midjourney生产图片周期测试以及blend进展</a>
            
        </span>
        <span class="column is-12-mobile is-half-desktop  article-nav-next">
            
            <a href="/2024/08/05/2024-8-5/">2024-8-5-midjourney共享版批量做图提交定时暂停手动暂停</a>
            
        </span>
    </div>
    
</article>




<div class="comments">
    <h3 class="title is-4">评论</h3>
    
<div id="valine-thread"></div>

<style>
.v[data-class="v"] .veditor {
    max-height: 17em;
    overflow-y: scroll;
}

/* 去除查看更多 */
.v[data-class="v"] .vcards .vcard .vcontent.expand {
    max-height: none;
}

.v[data-class="v"] .vcards .vcard .vcontent.expand::before,
.v[data-class="v"] .vcards .vcard .vcontent.expand::after {
    display: none;
}

</style>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src='//unpkg.com/valine/dist/Valine.min.js'></script>
<script src="https://cdn.jsdelivr.net/gh/flatblowfish/cave-draw/dist/cave-draw.min.js"></script>

<script>
    new Valine({
        el: '#valine-thread',
        appId: 'iPPfF8Jwk6zoVuC8yAJLVdLT-gzGzoHsz',
        appKey: 'D78M0CStPxwTiqW2ql4mmhrA',
        notify: false,
        verify: false,
        avatar: 'mp',
        placeholder: '想到什么说什么',
        meta: ['nick', 'mail'],
        visitor: true,
        lang: 'zh-CN'
    })

var count = 0;
var dom_timer = setInterval(function () {
	if (++count > 50) clearInterval(dom_timer);
	if (document.querySelector('#veditor')) {
		var cdraw = new CaveDraw({
			element: "#veditor",
			readOnlyMode: false, // valine 不提交form，而是过滤评论框数据后发送，所以评论框不能readonly。
			afterUpdateEditor: ()=>{ // 手动触发valine对评论框数据的过滤
				document.querySelector('#veditor').focus();
				document.querySelector('#veditor').blur();
			},
			controls: ['brush', 'eraser', 'bucket', 'clear', 'undo', 'redo', 'save']
		});
		clearInterval(dom_timer);
	}
}, 200);
</script>


</div>

    </div>
</section>
    <footer class="footer">
    <div class="container">
        <div class="columns content">
            <div class="column is-narrow has-text-centered">
                &copy; 2025 于洋&nbsp;
                Разработано на базе <a href="http://hexo.io/" target="_blank">Hexo</a> & <a
                        target="_blank" rel="noopener" href="http://github.com/ppoffice/hexo-theme-minos">Minos</a>
            </div>
            <div class="column is-hidden-mobile"></div>

            
            
        </div>
    </div>
</footer>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script>

<!-- test if the browser is outdated -->
<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" target="_blank" rel="noopener" href="http://outdatedbrowser.com/">Update my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.js"></script>
<script>
    $(document).ready(function () {
        // plugin function, place inside DOM ready function
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        })
    });
</script>

<script>
    window.FontAwesomeConfig = {
        searchPseudoElements: true
    }
    moment.locale("zh-CN");
</script>


    
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script>
    MathJax.Hub.Config({
        "HTML-CSS": {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
</script>

    
    
    
    
<script src="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/js/lightgallery-all.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/js/jquery.justifiedGallery.min.js"></script>
<script>
    (function ($) {
        $(document).ready(function () {
            if (typeof($.fn.lightGallery) === 'function') {
                $('.article.gallery').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof($.fn.justifiedGallery) === 'function') {
                $('.justified-gallery > p > .gallery-item').unwrap();
                $('.justified-gallery').justifiedGallery();
            }
        });
    })(jQuery);
</script>

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
    <style>
        .hljs {
            position: relative;
        }

        .hljs .clipboard-btn {
            float: right;
            color: #9a9a9a;
            background: none;
            border: none;
            cursor: pointer;
        }

        .hljs .clipboard-btn:hover {
          color: #8a8a8a;
        }

        .hljs > .clipboard-btn {
            display: none;
            position: absolute;
            right: 4px;
            top: 4px;
        }

        .hljs:hover > .clipboard-btn {
            display: inline;
        }

        .hljs > figcaption > .clipboard-btn {
            margin-right: 4px;
        }
    </style>
    <script>
      $(document).ready(function () {
        $('figure.hljs').each(function(i, figure) {
          var codeId = 'code-' + i;
          var code = figure.querySelector('.code');
          var copyButton = $('<button>Copy <i class="far fa-clipboard"></i></button>');
          code.id = codeId;
          copyButton.addClass('clipboard-btn');
          copyButton.attr('data-clipboard-target-id', codeId);

          var figcaption = figure.querySelector('figcaption');

          if (figcaption) {
            figcaption.append(copyButton[0]);
          } else {
            figure.prepend(copyButton[0]);
          }
        })

        var clipboard = new ClipboardJS('.clipboard-btn', {
          target: function(trigger) {
            return document.getElementById(trigger.getAttribute('data-clipboard-target-id'));
          }
        });
        clipboard.on('success', function(e) {
          e.clearSelection();
        })
      })
    </script>

    
    

    



<script src="/js/script.js"></script>


    
    <div class="searchbox ins-search">
    <div class="searchbox-mask"></div>
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="站内搜索" />
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: '文章',
                PAGES: '页面',
                CATEGORIES: '分类',
                TAGS: '标签',
                UNTITLED: '(无标题)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>

<script src="/js/insight.js"></script>

    
</body>
</html>